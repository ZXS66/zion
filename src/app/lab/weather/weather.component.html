<form (change)="updateFormData($event)">
  <mat-form-field>
    <mat-label>åŸå¸‚</mat-label>
    <input matInput required type="search" placeholder="xxå¸‚/xxåŒº/xxå¿" name="city" [(ngModel)]="formData.city">
  </mat-form-field>
</form>
<!-- <p>å¤©æ°”æœåŠ¡APIçŠ¶æ€ï¼š{{serviceReady?'ğŸŸ¢':'ğŸ”´'}}</p> -->
<mat-tab-group [selectedIndex]="tabIndex" (selectedIndexChange)="onTabChange($event)">
  <mat-tab label="å®å†µå¤©æ°”">
    <ng-container *ngIf="resultData&&resultData.lives&&resultData.lives.length" [ngTemplateOutlet]="lives" [ngTemplateOutletContext]="{data:resultData.lives[0]}">
    </ng-container>
  </mat-tab>
  <mat-tab label="æœªæ¥ä¸‰å¤©é¢„æŠ¥å¤©æ°”">
    <ng-container *ngIf="resultData&&resultData.forecasts&&resultData.forecasts.length" [ngTemplateOutlet]="forecast" [ngTemplateOutletContext]="{data:resultData.forecasts[0]}">
    </ng-container>
  </mat-tab>
</mat-tab-group>

<ng-template #lives let-data="data">
  <mat-list role="list" [style.background-image]="getBg(data.weather)">
    <mat-list-item role="listitem">
      <div>
        <i class="weather-icon" [ngClass]="data.weather" [title]="data.weather"></i>
        <i class="mat-caption">{{data.weather}}</i>
      </div>
    </mat-list-item>
    <mat-list-item role="listitem">
      <p>ğŸŒ¡ï¸{{data.temperature}}â„ƒ</p>
    </mat-list-item>
    <mat-list-item role="listitem">
      <img [src]="icons.wind" alt="é£åŠ›"/>{{data.winddirection}}é£{{data.windpower}}çº§
    </mat-list-item>
    <mat-list-item role="listitem">
      <img [src]="icons.humidity" alt="æ¹¿åº¦"/>ç›¸å¯¹æ¹¿åº¦{{data.humidity|number:'1.0-0'}}%
    </mat-list-item>
  </mat-list>
  <footer class="mat-caption">{{data.reporttime | date:'shortTime'}}å®å†µ</footer>
</ng-template>

<ng-template #forecast let-data="data">
  <mat-grid-list cols="4" rowHeight="62vh" gutterSize="0.25em">
    <mat-grid-tile *ngFor="let item of data.casts;let i=index" [style.background-image]="getBg(item.dayweather)">
      <article>
        <p>
          {{i===0?'ä»Šå¤©':i===1?'æ˜å¤©':i===2?'åå¤©':'å¤§åå¤©'}}ï¼Œ
          {{item.date|date:'Mæœˆdæ—¥'}}ï¼Œ
          å‘¨{{parseWeek(item.week)}}
        </p>
        <p>
          <!-- ç™½å¤©å¤©æ°”ç°è±¡ -->
          {{item.dayweather}}
          <!-- æ™šä¸Šå¤©æ°”ç°è±¡ -->
          <ng-container *ngIf="item.nightweather!==item.dayweather">
            è½¬{{item.nightweather}}
          </ng-container>
        </p>
        <p>ğŸŒ¡ï¸{{item.nighttemp}}-{{item.daytemp}}â„ƒ</p>
        <p>
          <img [src]="icons.wind" alt="é£åŠ›"/>
          <!-- ç™½å¤©é£å‘ -->
          {{item.daywind}}é£{{item.daypower}}çº§
          <!-- æ™šä¸Šé£å‘ -->
          <ng-container *ngIf="item.nightwind!==item.daywind">
            è½¬{{item.nightwind}}é£{{item.nightpower}}çº§
          </ng-container>
        </p>
      </article>
    </mat-grid-tile>
  </mat-grid-list>
  <footer class="mat-caption">{{data.reporttime | date:'shortTime'}}å®å†µ</footer>
</ng-template>
